{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/DragTable/index.tsx","pages/DragTable/index.tsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","DragTable","props","dragStart","drop","onRow","Error","record","index","style","cursor","draggable","onDragStart","onDragOver","e","preventDefault","onDrop","columns","title","dataIndex","render","text","tags","map","tag","color","toUpperCase","data","name","age","address","DragTablePage","useState","dataSource","setDataSource","dragItem","setDragItem","dragIndex","setDragIndex","id","className","bordered","pagination","console","log","newData","cloneDeep","splice"],"mappings":"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","file":"static/js/10.1390dcfc.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React from 'react';\nimport { Table } from 'antd';\n\ninterface Iprops {\n  columns: any[]\n  dataSource: any\n  dragStart: (record: any, index: number) => any\n  drop: (index: number) => any\n  [propName: string]: any;\n}\n\nconst DragTable: React.FC<Iprops> = (props) => {\n  const { dragStart, drop } = props\n\n  if (props.onRow) {\n    throw Error('不支持 onRow')\n  }\n\n  return (\n    <Table {...props} onRow={(record: any, index: any) => {\n      return {\n        style: { cursor: 'move' },\n        draggable: true,\n        onDragStart: () => dragStart(record, index),\n        onDragOver: (e: any) => {\n          // 禁用 onDragOver 的默认事件才能出发 onDrop\n          e.preventDefault()\n        },\n        onDrop: () => drop(index)\n      };\n    }} />\n  )\n}\n\nexport default DragTable;","import React, { useState } from 'react';\nimport { Tag } from 'antd';\nimport DragTable from '@components/DragTable'\nimport './index.less';\nimport { cloneDeep } from 'lodash'\n\nconst columns = [\n  {\n    title: 'Name',\n    dataIndex: 'name',\n    key: 'name',\n    // eslint-disable-next-line jsx-a11y/anchor-is-valid\n    render: (text: string) => <a>{text}</a>,\n  },\n  {\n    title: 'Age',\n    dataIndex: 'age',\n    key: 'age',\n  },\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    key: 'address',\n  },\n  {\n    title: 'Tags',\n    key: 'tags',\n    dataIndex: 'tags',\n    render: (tags: []) => (\n      <span>\n        {tags.map((tag: string) => {\n          let color = tag.length > 5 ? 'geekblue' : 'green';\n          if (tag === 'loser') {\n            color = 'volcano';\n          }\n          return (\n            <Tag color={color} key={tag}>\n              {tag.toUpperCase()}\n            </Tag>\n          );\n        })}\n      </span>\n    ),\n  },\n];\n\nconst data = [\n  {\n    key: '1',\n    name: 'John Brown',\n    age: 32,\n    address: 'New York No. 1 Lake Park',\n    tags: ['nice', 'developer'],\n  },\n  {\n    key: '2',\n    name: 'Jim Green',\n    age: 42,\n    address: 'London No. 1 Lake Park',\n    tags: ['loser'],\n  },\n  {\n    key: '3',\n    name: 'Joe Black',\n    age: 32,\n    address: 'Sidney No. 1 Lake Park',\n    tags: ['cool', 'teacher'],\n  },\n  {\n    key: '4',\n    name: 'Bowen Zhu',\n    age: 24,\n    address: 'Changping District, Beijing',\n    tags: ['cool', 'handsome', 'developer'],\n  },\n];\n\nconst DragTablePage: React.FC = () => {\n\n  const [dataSource, setDataSource] = useState(data)\n  const [dragItem, setDragItem] = useState({})\n  const [dragIndex, setDragIndex] = useState(0)\n\n\n  const onDragStart = (record: any, index: number) => {\n    console.log(record, index)\n    setDragItem(record)\n    setDragIndex(index)\n  }\n\n  const onDrop = (index: number) => {\n    console.log(index)\n    const newData = cloneDeep(dataSource) as any\n    newData.splice(dragIndex, 1)\n    newData.splice(index, 0, dragItem)\n    console.log(newData)\n    setDataSource(newData)\n  }\n\n  return (\n    <div id=\"dragTablePage\">\n      <div className=\"title\">\n        基于 antd 的表格拖拽（简易封装，无需集成 react-dnd ，节省代码）\n      </div>\n      <DragTable\n        columns={columns}\n        dataSource={dataSource}\n        bordered\n        pagination={false}\n        dragStart={onDragStart} // 获取被拖拽行的数据和索引\n        drop={onDrop} // 获取交换行的索引\n      />\n    </div>\n  )\n}\n\nexport default DragTablePage;"],"sourceRoot":""}