(this["webpackJsonpreact-rtk-ts"]=this["webpackJsonpreact-rtk-ts"]||[]).push([[11],{393:function(e,t,n){"use strict";n.r(t);var r=n(206),a=n(8),i=n(0),c=n(63),l=n.n(c),o=n(219),d=n(250),s=n(136),u=n(388),f=n(391),h=n(386),b=n(387),j=n(389),m=n(249),p=n(390),g=n(392),O=n(70),x=n(221),y=n(220),v=n(230);function k(){var e=Object(o.a)(["\n  float: ",";\n  margin: ",";\n  .ant-form-item-label label {\n    display: inline-block;\n    width: ",";\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n  }\n"]);return k=function(){return e},e}function _(){var e=Object(o.a)(["\n  width: 100%;\n  ","\n"]);return _=function(){return e},e}var w=x.a.div(_(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"&",t="".concat(e,"::after");return Object(v.a)({},t,{clear:"both",content:'""',display:"table"})}()),Y=x.a.div(k(),(function(e){return e.floatDirection||"left"}),(function(e){return e.margin||"0 14px"}),(function(e){return e.labelWidth||"100px"}));function D(){var e=Object(o.a)(["\n  background: #fff;\n  .filterBtn {\n    float: right;\n    cursor: pointer;\n    color: #00a0e9;\n    font-weight: bold;\n  }\n  .ant-advanced-search-form {\n    .ant-form-item {\n      display: flex;\n      margin-bottom: 15px;\n    }\n    .btnWrap {\n      display: flex;\n      justify-content: flex-end;\n    }\n  }\n"]);return D=function(){return e},e}var E=j.a.RangePicker,M=j.a.MonthPicker,P=m.a.Option,C=d.a.Group,S=i.useState,R=i.useEffect,H=x.a.div(D()),A=function(e){var t=e.filterArr,n=e.onSearch,i=e.filterRender,c=e.searchParams,l=S([]),o=Object(r.a)(l,2),u=o[0],x=o[1],v=S(!1),k=Object(r.a)(v,2),_=k[0],D=k[1],A=S([]),F=Object(r.a)(A,2),I=F[0],N=F[1],B=S(!1),T=Object(r.a)(B,2),V=T[0],z=T[1],J=S(!1),K=Object(r.a)(J,2),L=K[0],W=K[1],G=p.a.useForm(),q=Object(r.a)(G,1)[0];R((function(){x(Object(y.cloneDeep)(t).filter((function(e){return!e.isHide})))}),[t]);var Q=function(e){switch(e.type){case"Input":return Object(a.jsx)(g.a,{placeholder:e.placeholder,autoComplete:"off",style:{width:200}});case"Select":return e.selectOption&&Object(a.jsx)(m.a,{showSearch:!0,allowClear:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:200},mode:e.multiple&&"multiple",placeholder:e.placeholder,children:e.selectOption.map((function(e,t){return Object(a.jsx)(P,{value:e.value,children:e.label},t)}))});case"DatePicker":return Object(a.jsx)(j.a,{style:{width:200},placeholder:e.placeholder,showTime:!!e.showTime&&{format:"HH:mm"},format:e.format||"YYYY-MM-DD",disabledDate:e.disabledDate||null});case"RangePicker":return Object(a.jsx)(E,{style:{width:e.showTime?300:240},showTime:!!e.showTime&&{format:"HH:mm"},format:e.format||"YYYY-MM-DD",disabledDate:e.disabledDate||null});case"MonthPicker":return Object(a.jsx)(M,{style:{width:200},placeholder:e.placeholder,format:e.format||"YYYY-MM",disabledDate:e.disabledDate||null});default:return null}},U=t.filter((function(e){return e.isHide}));return Object(a.jsxs)(H,{children:[Object(a.jsx)("div",{style:{marginBottom:20,display:"flex",justifyContent:"flex-end"},children:U.length?Object(a.jsx)("span",{className:"filterBtn",onClick:function(){D(!0),N(u.map((function(e){return e.label}))),W(!!u.length&&u.length<t.length),z(u.length===t.length)},children:"\u81ea\u5b9a\u4e49\u7b5b\u9009\u9879"}):null}),Object(a.jsxs)(f.a,{title:"\u7b5b\u9009",visible:_,onOk:function(){if(I.length){var e=[];t.forEach((function(t){I.forEach((function(n){n===t.label&&e.push(t)}))})),x(e),D(!1),N([]),i(e)}else s.b.warning("\u8bf7\u81f3\u5c11\u5c55\u793a\u4e00\u4e2a\u7b5b\u9009\u9879")},onCancel:function(){D(!1)},children:[Object(a.jsx)("div",{children:Object(a.jsx)(d.a,{indeterminate:L,onChange:function(e){z(e.target.checked),N(e.target.checked?t.map((function(e){return e.label})):t.filter((function(e){return e.disabled})).map((function(e){return e.label}))),W(!1)},checked:V,children:"\u5168\u9009"})}),Object(a.jsx)("br",{}),Object(a.jsx)(C,{value:I,onChange:function(e){N(e),z(e.length===t.length),W(!!e.length&&e.length<t.length)},style:{width:"100%"},children:Object(a.jsx)(h.a,{gutter:24,children:t.map((function(e){return Object(a.jsx)(b.a,{style:{marginBottom:10},span:6,children:Object(a.jsx)(d.a,{disabled:e.disabled,value:e.label,children:e.label})})}))})})]}),Object(a.jsx)(p.a,{className:"ant-advanced-search-form",form:q,ref:e.myRef,onFinish:function(e){var t={};u.forEach((function(n){var r=n.name,a=n.type,i=n.format,c=n.filterName;a&&a.includes("Picker")?("DatePicker"===a&&(t[r]=e[r]?e[r].format(i||"YYYYMMDD"):void 0),"RangePicker"===a&&c&&e[r]&&(t[c[0]]=e[r][0].format(i||"YYYYMMDD"),t[c[1]]=e[r][1].format(i||"YYYYMMDD")),"MonthPicker"===a&&(t[r]=e[r]?e[r].format("YYYYMM"):void 0)):t[r]=e[r]}));!function(e){Object.keys(e).forEach((function(t){""!==e[t]&&null!==e[t]&&void 0!==e[t]&&"{}"!==JSON.stringify(e[t])&&"[]"!==JSON.stringify(e[t])||delete e[t]}))}(t),n(t)},initialValues:c,children:Object(a.jsxs)(w,{children:[function(e){var t=[];return e.forEach((function(e,n){t.push(Object(a.jsx)(Y,{labelWidth:"80px",children:Object(a.jsx)(p.a.Item,{label:e.label,name:e.name,children:e.render?e.render:Q(e)})},n))})),t}(u),Object(a.jsx)(Y,{floatDirection:"right",margin:"0",children:Object(a.jsxs)("div",{style:{textAlign:"right"},children:[Object(a.jsx)(O.a,{type:"primary",htmlType:"submit",children:"\u641c\u7d22"}),Object(a.jsx)(O.a,{style:{marginLeft:8},onClick:function(){q.resetFields()},children:"\u91cd\u7f6e"})]})})]})})]})};function F(){var e=Object(o.a)(["\n  .title {\n    position: relative;\n    height: 40px;\n    line-height: 40px;\n    background: #fff;\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    span {\n      cursor: pointer;\n      font-weight: bold;\n      font-size: 12px;\n      color: #00a0e9;\n    }\n  }\n"]);return F=function(){return e},e}var I=d.a.Group,N=i.useState,B=i.useEffect,T=x.a.div(F()),V=function(e){var t=e.filterArr,n=e.columns,c=e.isShowExport,l=e.handleExport,o=e.loading,j=e.dataSource,m=e.getFilter,p=e.getPagination,g=e.rowKey,O=e.searchParams,x=e.pagination,v=n.filter((function(e){return e.isHide})),k=N(n),_=Object(r.a)(k,2),w=_[0],Y=_[1],D=N(!1),E=Object(r.a)(D,2),M=E[0],P=E[1],C=N([]),S=Object(r.a)(C,2),R=S[0],H=S[1],F=N(!1),V=Object(r.a)(F,2),z=V[0],J=V[1],K=N(!1),L=Object(r.a)(K,2),W=L[0],G=L[1];B((function(){Y(Object(y.cloneDeep)(n).filter((function(e){return!e.isHide})))}),[n]);return Object(a.jsxs)(i.Fragment,{children:[Object(a.jsx)(A,{filterArr:t,onSearch:function(e){m(e)},filterRender:function(e){var t=Object(y.cloneDeep)(w),r=t.filter((function(e){return e.key})).map((function(e){return e.key}));e.forEach((function(e){if(!r.includes(e.name)){var a=n.filter((function(t){return t.key===e.name}))[0];a&&t.push(a)}}));var a=[];n.forEach((function(e){t.forEach((function(t){t.key===e.key&&a.push(e)}))})),Y(a)},myRef:e.myRef,searchParams:O}),Object(a.jsxs)(T,{children:[Object(a.jsxs)("div",{className:"title",children:[v.length?Object(a.jsx)("span",{onClick:function(){P(!0),H(w.map((function(e){return e.title}))),G(!!w.length&&w.length<n.length),J(w.length===n.length)},children:"\u81ea\u5b9a\u4e49\u5c55\u793a\u9879"}):null,c&&Object(a.jsx)("span",{className:"export",onClick:l,children:"\u5bfc\u51fa"})]}),Object(a.jsx)(u.a,{bordered:!0,columns:w,pagination:x,dataSource:j,onChange:function(e){p({current:e.current,pageSize:e.pageSize,total:e.total})},loading:o,rowKey:g})]}),Object(a.jsxs)(f.a,{title:"\u7b5b\u9009",visible:M,onOk:function(){if(R.length){var e=[];n.forEach((function(t){R.forEach((function(n){n===t.title&&e.push(t)}))})),Y(e),P(!1),H([])}else s.b.warning("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a")},onCancel:function(){P(!1)},children:[Object(a.jsx)("div",{children:Object(a.jsx)(d.a,{indeterminate:W,onChange:function(e){J(e.target.checked),H(e.target.checked?n.map((function(e){return e.title})):n.filter((function(e){return e.disabled})).map((function(e){return e.title}))),G(!1)},checked:z,children:"\u5168\u9009"})}),Object(a.jsx)("br",{}),Object(a.jsx)(I,{value:R,onChange:function(e){H(e),J(e.length===n.length),G(!!e.length&&e.length<n.length)},style:{width:"100%"},children:Object(a.jsx)(h.a,{gutter:24,children:n.map((function(e){return Object(a.jsx)(b.a,{style:{marginBottom:10},span:6,children:Object(a.jsx)(d.a,{disabled:e.disabled,value:e.title,children:e.title})})}))})})]})]})},z=n(101),J=n(116),K=i.useState,L=i.useEffect,W=i.useMemo,G=i.useRef;t.default=function(e){var t=K([]),n=Object(r.a)(t,2),i=n[0],c=n[1],o=G(null),d=Object(z.c)(J.b),s=Object(z.b)(),u=d.tableData,f=d.searchParams,h=d.pagination;L((function(){c([{label:"\u8ba2\u5355\u53f7",name:"order_no",type:"Input",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7",disabled:!0,initialValue:""},{label:"\u521b\u5efa\u65e5\u671f",name:"create_time",type:"DatePicker",placeholder:"\u8bf7\u9009\u62e9\u521b\u5efa\u65e5\u671f",disabled:!0,initialValue:""},{label:"\u65e5\u671f\u8303\u56f4",name:"order_date",filterName:["order_start_date","order_end_date"],type:"RangePicker",placeholder:"",disabled:!0,initialValue:""},{label:"\u5730\u5740",name:"address",type:"Input",placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",isHide:!0,initialValue:""}])}),[]);var b=W((function(){return[{title:"\u8ba2\u5355\u53f7",dataIndex:"order_no",key:"order_no",width:250,disabled:!0},{title:"\u521b\u5efa\u65e5\u671f",dataIndex:"create_time",key:"create_time",width:150,disabled:!0},{title:"\u65e5\u671f\u8303\u56f4",dataIndex:"order_date",key:"order_date",width:200,disabled:!0},{title:"\u5730\u5740",dataIndex:"address",key:"address",width:150,isHide:!0}]}),[]);return Object(a.jsxs)("div",{id:"orderManage",children:[Object(a.jsxs)("div",{children:["\u5217\u8868\u7ec4\u4ef6\u6a21\u677f\uff0c\u70b9\u51fb\u67e5\u770b",Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/zhubooooowen/React-Study#%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E6%A8%A1%E6%9D%BF",children:"\u914d\u7f6e\u8be6\u60c5"})]}),Object(a.jsx)(V,{filterArr:i,columns:b,loading:!1,myRef:o,rowKey:"order_no",dataSource:u,searchParams:f,pagination:h,getFilter:function(e){console.log(e),console.log(o),s(Object(J.d)({order_no:e.order_no,create_time:l()(e.create_time),order_date:[l()(e.order_start_date),l()(e.order_end_date)]}))},getPagination:function(e){s(Object(J.c)(e));var t=1===e.current?[{order_no:123,create_time:"2020-12-12",order_date:"2020-12-12 ~ 2020-12-20",address:"\u534e\u9f99\u82d1\u5357\u91cc"},{order_no:234,create_time:"2020-12-12",order_date:"2020-12-12 ~ 2020-12-20",address:"\u534e\u9f99\u82d1\u5357\u91cc"},{order_no:345,create_time:"2020-12-12",order_date:"2020-12-12 ~ 2020-12-20",address:"\u534e\u9f99\u82d1\u5357\u91cc"}]:[{order_no:456,create_time:"2020-12-12",order_date:"2020-12-12 ~ 2020-12-20",address:"\u534e\u9f99\u82d1\u5357\u91cc"},{order_no:567,create_time:"2020-12-12",order_date:"2020-12-12 ~ 2020-12-20",address:"\u534e\u9f99\u82d1\u5357\u91cc"}];s(Object(J.e)(t))}})]})}}}]);
//# sourceMappingURL=11.41c5027b.chunk.js.map